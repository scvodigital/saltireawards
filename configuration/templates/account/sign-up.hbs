<form id="sign-up-form" method="POST" class="authentication-form container-fluid">
  <h1 class="x-padding">
    Sign up
  </h1>
  <div class="l-margin r-margin">
    <div id="sign-up-message">
      <span id="form-message"></span>
    </div>
  </div>
  <div class="x-padding">
    <div id="form-section-email">
      {{> account_sign_in_social loaderSelector="#sign-up-loader" messageSelector="#sign-up-message"}}

      <div class="divider text-center v-margin-full" data-content="or"></div>

      <div class="form-group has-icon-left">
        <input class="form-input" type="email" id="sign-up-email" placeholder="Email" required />
        <span class="form-icon far fa-at"></span>
      </div>
      <div class="form-group has-icon-left">
        <input class="form-input" type="email" id="sign-up-email-confirm" placeholder="Confirm email" data-lpignore="true" autocomplete="off" required />
        <span class="form-icon far fa-at"></span>
      </div>
      <div class="form-group has-icon-left">
        <input class="form-input" type="password" id="sign-up-password" placeholder="Password" data-lpignore="true" autocomplete="off" required />
        <span class="form-icon far fa-key"></span>
      </div>
      <div class="form-group has-icon-left">
        <input class="form-input" type="password" id="sign-up-password-confirm" placeholder="Confirm password" data-lpignore="true" autocomplete="off" required />
        <span class="form-icon far fa-key"></span>
      </div>
    </div>
    <div id="form-section-sign-up-buttons" class="t-margin">
      <button class="btn btn-primary" type="submit" id="sign-up-submit">
        Sign up
      </button>
      <div class="v-margin-full">
        Read our <a href="/privacy" target="_blank">privacy notice</a>
      </div>
      <div class="v-margin-full">
        Already have an account? <a href="/sign-in">Sign in</a>
      </div>
    </div>
    <div class="card-loader" id="sign-up-loader">
      <div class="card-loader-background"></div>
      <div class="card-loader-inner">
        <span class="far fa-2x fa-spinner-third fa-spin"></span>
      </div>
    </div>
  </div>
  <input type="hidden" name="redirect" id="redirect" value="home" />
</form>

<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
  var $form = $('#sign-up-form');
  var $message = $('#sign-up-message');
  var $emailForm = $('#email-password-form');
  var $email = $('#sign-up-email');
  var $emailConfirm = $('#sign-up-email-confirm');
  var $password = $('#sign-up-password');
  var $passwordConfirm = $('#sign-up-password-confirm');
  var $register = $('#sign-up-submit');
  var $loader = $('#sign-up-loader');

  function hasSubscriptions() {
    return ($("input[name^='list']:checked")).length > 0;
  }

  $form.on('submit', function(evt) {
    $loader.css('display', 'flex');
    evt.preventDefault();
    var email = $email.val();
    var emailConfirm = $emailConfirm.val();
    var password = $password.val();
    var passwordConfirm = $passwordConfirm.val();
    saltireawards.auth.createAccount(email, emailConfirm, password, passwordConfirm)
    .then(function(user) {
      window.location.href = '/';
    })
    .catch(function(err) {
      $message.text(err.message || 'There was a problem creating your account').show();
      $loader.css('display', 'none');
      document.body.scrollTop = document.documentElement.scrollTop = 0;
      return;
    });
  });
})
</script>